<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <title>wandering-earth</title>
</head>

<body>
  <video autoplay muted loop
    style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1;">
    <source src="video/wandering-earth.mp4" type="video/mp4">
  </video>

  <div class="centered-content" style="position: absolute; bottom: 20px; right: 20px; z-index: 1;">
    <div class="we" id="we-crisis" style="opacity: 0;">
      <div class="we-column">
        <div class="we-text we-text-large we-text-char">
          <div id="we-year" style="display: inline;">2025</div>星渊劫逢
        </div>
        <div class="we-text we-text-normal we-text-red">流浪地球·三体<br>
          <div class="we-text-char we-text-inline"></div> 命运协奏
        </div>
        <div class="we-text we-text-small we-text-char">A Fateful Encounter <br>
          in the Starry Abyss:<br>
          The Symphony of The Wandering Earth and The Three-Body<br>
        </div>
      </div>
    </div>

    <div class="we" id="we-countdown" style="opacity: 0;">
      <div style="margin-bottom: 10vh; display: flex; flex-direction: column; align-items: center;">
        <div class="we-text we-text-inline we-text-normal we-text-char"
          style="display: inline-block; line-height: 3.5rem; margin-bottom: 1.5rem; text-align: left; padding-left: 0rem; margin-left: -24rem; align-self: flex-start; white-space: nowrap;">
          距 流浪地球·三体 危机</div>
        <div class="we-column" style="margin-top: 1rem;">
          <div class="we-text we-text-normal we-text-char" style="line-height: 4rem;">
            还剩
            <div class="we-text-inline we-text-very-large we-text-red we-text-char" id="we-second">5</div>
            秒
          </div>
          <div class="we-text we-text-very-small we-text-char" style="line-height: 2.5rem;">
            A Fateful Encounter <br>
            in the Starry Abyss:<br>
            the Wandering Earth encounters<br>
            the Three-Body Crisis<br>
            <div id="we-second-2" style="display: inline;">5</div> SECONDS
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&display=swap');

    @font-face {
      font-family: 'SciFiFont';
      src: local('Orbitron'), url('https://fonts.gstatic.com/s/orbitron/v25/yMJRMIlzdpvBhQQL_Qq7dy0.woff2') format('woff2');
      font-display: swap;
    }

    body {
      background-color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
  </style>

  <style>
    .we {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.6s cubic-bezier(0.25, 0.1, 0.25, 1);
      width: 50%;
      max-width: 700px;
      will-change: transform, opacity;
    }

    .we-column {
      padding-left: 15px;
      border-left: 8px solid #ff0000;
      width: 100%;
      margin: 0 auto;
      padding-bottom: 1.5rem;
    }

    .we-text {
      color: #ffffff;
      line-height: normal;
      display: block;
      margin: 1rem 0;
      padding: 0 1rem;
      text-align: center;
    }

    .we-text-inline {
      display: inline-block;
    }

    .we-text-red {
      color: #ff0000;
    }

    .we-text-very-large {
      font-size: 12rem;
      line-height: 0;
      margin: 1.3rem 0;
    }

    .we-text-large {
      font-size: 5rem;
      line-height: 5rem;
      margin: 1.8rem 0;
    }

    .we-text-normal {
      font-size: 3.5rem;
      line-height: 4rem;
    }

    .we-text-small {
      font-size: 2.2rem;
      line-height: 2.8rem;
    }

    .we-text-very-small {
      font-size: 1.8rem;
      line-height: 2.3rem;
      margin-top: 1.3rem;
    }

    @media (max-width: 768px) {
      .we {
        width: 80%;
      }

      .we-text-very-large {
        font-size: 7rem;
        margin: 1rem 0;
      }

      .we-text-large {
        font-size: 3.5rem;
        line-height: 3.5rem;
        margin: 1.3rem 0;
      }

      .we-text-normal {
        font-size: 2.2rem;
        line-height: 2.8rem;
      }

      .we-text-small {
        font-size: 1.8rem;
        line-height: 2.3rem;
      }

      .we-text-very-small {
        font-size: 1.3rem;
        line-height: 1.8rem;
        margin-top: 0.8rem;
      }
    }

    .we-text-char {
      font-family: 'SciFiFont', 'Orbitron', sans-serif;
      font-weight: 700;
      letter-spacing: 1px;
    }
  </style>

  <script>
    (function () {
      document.getElementById("we-year").innerHTML = (new Date()).getFullYear();

      function setSecond(i) {
        document.getElementById('we-second').innerHTML = i;
        document.getElementById('we-second-2').innerHTML = i;
      }

      setTimeout(function () { document.getElementById("we-crisis").setAttribute('style', 'opacity: 1;'); }, 0);
      setTimeout(function () { document.getElementById("we-crisis").setAttribute('style', 'opacity: 0;'); }, 2000);
      setTimeout(function () { document.getElementById("we-countdown").setAttribute('style', 'opacity: 1;'); }, 3500);
      setTimeout(function () { setSecond(4); }, 4500);
      setTimeout(function () { setSecond(3); }, 5500);
      setTimeout(function () { setSecond(2); }, 6500);
      setTimeout(function () { setSecond(1); }, 7500);
      setTimeout(function () { setSecond(0); window.location.href = './index.html'; }, 8500);
    })();
  </script>
  <script>
    document.addEventListener('click', function () {
      var elem = document.documentElement;
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.mozRequestFullScreen) { /* Firefox */
        elem.mozRequestFullScreen();
      } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE/Edge */
        elem.msRequestFullscreen();
      }
    }, { once: true }); // 使用 { once: true } 确保只在第一次点击时触发




    function forceVideoLoop(video) {
      if (!video) return;
      // 彻底移除loop属性后再加上
      video.removeAttribute('loop');
      video.setAttribute('loop', 'loop');
      // 多重保险：事件+定时器+属性
      function realLoop() {
        if (video.ended || video.paused || (video.duration - video.currentTime < 0.2)) {
          video.currentTime = 0.01;
          let p = video.play();
          if (p && p.catch) p.catch(() => { setTimeout(() => { video.play(); }, 100); });
        }
      }
      video.addEventListener('ended', realLoop);
      video.addEventListener('timeupdate', function () {
        if (video.duration - video.currentTime < 0.05) {
          video.currentTime = 0.01;
          video.play();
        }
      });
      // 火狐file协议下再加一层保险
      var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;
      var isFileProtocol = window.location.protocol === 'file:';
      if (isFirefox && isFileProtocol) {
        if (!window._ffLoopInterval) {
          window._ffLoopInterval = setInterval(realLoop, 200);
        }
      }
      // 其他浏览器也加保险
      if (!window._videoLoopInterval) {
        window._videoLoopInterval = setInterval(realLoop, 500);
      }
      // 属性保险
      video.setAttribute('autoplay', 'autoplay');
      video.autoplay = true;
      video.setAttribute('muted', 'muted');
      video.muted = true;
      video.setAttribute('playsinline', '');
      video.playsInline = true;
      video.controls = false;
      video.removeAttribute('controls');
      video.style.pointerEvents = 'auto';
      video.style.cursor = 'pointer';
      // 禁止右键菜单和拖拽
      video.addEventListener('contextmenu', function (e) { e.preventDefault(); });
      video.addEventListener('dragstart', function (e) { e.preventDefault(); });
      video.addEventListener('selectstart', function (e) { e.preventDefault(); });
    }


  </script>
</body>

</html>